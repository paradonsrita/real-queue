@page "/"
@inject IJSRuntime JSRuntime
<!--Index.razor-->

@using Radzen.Blazor;


<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<SurveyPrompt Title="How is Blazor working for you?" />

<RadzenButton Text="Create PDF" ButtonStyle="ButtonStyle.Success" Click="GetData" Style="width: 200px; height: 50px; font-size: 1.25rem;" />

<RadzenButton Text="Print PDF" ButtonStyle="ButtonStyle.Success" Click="PrintPdf" Style="width: 200px; height: 50px; font-size: 1.25rem;" />
<p>@htmlData</p>

@code {
    private string htmlData;

    private async Task GetData()
    {
        htmlData = await GetPdfData();
        Console.WriteLine(htmlData);  // ตรวจสอบว่าข้อมูล htmlData ถูกสร้างหรือไม่


    }

    private async Task PrintPdf()
    {
        if (!string.IsNullOrEmpty(htmlData))
        {
            Console.WriteLine("Calling printPdf with data");
            await JSRuntime.InvokeVoidAsync("printPdf", htmlData);
        }
        else
        {
            Console.WriteLine("htmlData is empty");
        }
    }

    private async Task<string> GetPdfData()
    {
        
        
        //สร้าง HTML สำหรับ PDF
        var InputHtml = $@"
        <html>
        <head>
            <style>
                @page {{
                    size: A4;
                    margin: 10mm;
                }}
                .hidden-content {{
                    display: none;
                }}
            </style>
        </head>
        <body>
            <div class='row' style='width: 100%;'>
                <div>
                    <h1>ทดสอบปริ้น</h1>
                </div>
            </div>
        </body>
        </html>";

        return InputHtml;
        
    }


}